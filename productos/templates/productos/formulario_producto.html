{% extends "productos/base.html" %}

{% block title %}
    {% if form.instance.pk %}
        Editar Producto
    {% else %}
        Agregar Producto
    {% endif %}
{% endblock %}

{% block content %}
<div class="container py-5">
    <h1 class="mb-4 text-center">
        {% if form.instance.pk %}
            Editar Producto
        {% else %}
            Agregar Producto
        {% endif %}
    </h1>

    <div class="card shadow">
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- Campo: Nombre -->
                <div class="mb-3">
                    <label for="id_nombre">Nombre:</label>
                    {{ form.nombre }}
                </div>

                <!-- Campo: Precio -->
                <div class="mb-3">
                    <label for="id_precio">Precio:</label>
                    {{ form.precio }}
                </div>

                <!-- Campo: Descripción -->
                <div class="mb-3">
                    <label for="id_descripcion">Descripción:</label>
                    {{ form.descripcion }}
                </div>

                <!-- Campo: Categoría -->
                <div class="mb-3">
                    <label for="id_categoria">Categoría:</label>
                    {{ form.categoria }}
                </div>

                <!-- Mostrar imagen actual si existe -->
                <div class="mb-3">
                    {% if form.instance.imagen %}
                        <img src="{{ form.instance.imagen.url }}" alt="Imagen actual" width="150">
                    {% endif %}
                </div>
                
                <!-- Campo: Imagen (nueva o para reemplazar la actual) -->
                <div class="mb-3">
                    <label for="id_imagen">Seleccionar imagen:</label>
                    {{ form.imagen }}
                </div>

                <!-- Botón de envío -->
                <button type="submit" class="btn btn-success w-100 mt-3">
                    {% if form.instance.pk %}
                        Guardar cambios
                    {% else %}
                        Agregar
                    {% endif %}
                </button>
            </form>
        </div>
    </div>

    <div class="mt-3 text-center">
        <a href="{% url 'inicio' %}" class="btn btn-secondary">Volver al Inicio</a>
    </div>
</div>
{% endblock %}